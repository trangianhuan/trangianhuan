{"version":3,"sources":["webpack:///1.chunk.e7f3c.js","webpack:///./web/components/home/create.js"],"names":["webpackJsonp","4QEP","KeK4","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","d","Home","_dec","_class","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1_preact_router__","n","__WEBPACK_IMPORTED_MODULE_2__styles_sass_main_scss__","__WEBPACK_IMPORTED_MODULE_3_preact_redux__","__WEBPACK_IMPORTED_MODULE_4__store_word__","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","mapStoreToProps","state","words","word","wordsDate","isAdmin","user","_ref","className","_ref2","connect","mapDispatchToProps","_Component","props","_this","this","handleChange","event","setState","prevState","_extends2","name","handleClick","checkValid","regFirestore","mean_vi","mean_en","synonym","created_at","Math","round","Date","getTime","updated_at","valid","wordData","dateNow","db","collection","add","then","route","catch","error","console","regRealtimeDb","_this2","newWordKey","ref","child","push","updates","date","update","_this2$props$addWord","addWord","check","render","style","class","placeholder","type","onChange","rows","onClick","Component"],"mappings":"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","file":"1.chunk.e7f3c.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"4QEP\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"KeK4\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Home; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_preact_router__ = __webpack_require__(\"/QC5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__styles_sass_main_scss__ = __webpack_require__(\"4QEP\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__styles_sass_main_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__styles_sass_main_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_preact_redux__ = __webpack_require__(\"E/bI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__store_word__ = __webpack_require__(\"/m+c\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _dec, _class;\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\nvar mapStoreToProps = function mapStoreToProps(state) {\n  return {\n    words: state.word.words,\n    wordsDate: state.word.wordsDate,\n    isAdmin: state.user.isAdmin\n  };\n};\n\nvar _ref = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'p',\n  { className: 'date' },\n  '\\xA0'\n);\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n  'span',\n  null,\n  ' L\\u01B0u '\n);\n\nvar Home = (_dec = Object(__WEBPACK_IMPORTED_MODULE_3_preact_redux__[\"b\" /* connect */])(mapStoreToProps, __WEBPACK_IMPORTED_MODULE_4__store_word__[\"f\" /* mapDispatchToProps */]), _dec(_class = function (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    _classCallCheck(this, Home);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.handleChange = function (event) {\n      _this.setState(function (prevState) {\n        var _extends2;\n\n        return {\n          word: _extends({}, prevState.word, (_extends2 = {}, _extends2[event.target.name] = event.target.value, _extends2))\n        };\n      });\n    };\n\n    _this.handleClick = function (event) {\n      if (_this.checkValid()) return;\n\n      _this.regFirestore();\n    };\n\n    _this.state = {\n      word: {\n        word: '',\n        mean_vi: '',\n        mean_en: '',\n        synonym: '',\n        created_at: Math.round(new Date().getTime() / 1000),\n        updated_at: Math.round(new Date().getTime() / 1000)\n      },\n      valid: {\n        word: '',\n        mean_vi: ''\n      }\n    };\n    return _this;\n  }\n\n  Home.prototype.regFirestore = function regFirestore() {\n    var wordData = _extends({}, this.state.word);\n    wordData.created_at = dateNow();\n    wordData.updated_at = dateNow();\n\n    db.collection(\"words\").add(wordData).then(function (doc) {\n      //TODO\n      Object(__WEBPACK_IMPORTED_MODULE_1_preact_router__[\"c\" /* route */])('/', true);\n    }).catch(function (error) {\n      console.error(\"Error writing document: \", error);\n    });\n  };\n\n  Home.prototype.regRealtimeDb = function regRealtimeDb() {\n    var _this2 = this;\n\n    var newWordKey = db.ref('words').child('all').push().key;\n    var wordData = _extends({}, this.state);\n    word.created_at = Math.round(new Date().getTime() / 1000);\n    var updates = {};\n    if (newWordKey) {\n      var date = dateNow() || new Date();\n\n      updates['all/' + newWordKey] = wordData;\n      updates['date/' + date + '/' + newWordKey] = wordData;\n\n      db.ref('words').update(updates).then(function () {\n        var _this2$props$addWord;\n\n        _this2.props.addWord((_this2$props$addWord = {}, _this2$props$addWord[newWordKey] = wordData, _this2$props$addWord));\n      });\n    }\n  };\n\n  Home.prototype.checkValid = function checkValid() {\n    var check = '';\n\n    this.setState({ valid: {} });\n\n    if (!this.state.word.word) {\n      this.setState({ valid: _extends({}, this.state.valid, { word: 'Từ vựng không được để trống' }) });\n      check = 'error';\n    }\n\n    if (!this.state.word.mean_vi) {\n      this.setState({ valid: _extends({}, this.state.valid, { mean_vi: 'Nghĩa tiếng việt không được để trống' }) });\n      check = 'error';\n    }\n\n    return check;\n  };\n\n  Home.prototype.render = function render(props) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n      'div',\n      null,\n      Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n        'div',\n        { className: 'word-wrap' },\n        _ref,\n        Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n          'ul',\n          { className: 'word-list', style: 'margin-top:10px' },\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'li',\n            { 'class': 'm-b-20' },\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { className: 'input', placeholder: 'T\\u1EEB v\\u1EF1ng', name: 'word', type: 'text', value: this.state.word.word, onChange: this.handleChange }),\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'span',\n              { className: 'error' },\n              this.state.valid.word\n            )\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'li',\n            { 'class': 'm-b-20' },\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'textarea',\n              { className: 'input', placeholder: 'Ngh\\u0129a ti\\u1EBFng vi\\u1EC7t', name: 'mean_vi', type: 'text', onChange: this.handleChange, rows: '5' },\n              this.state.word.mean_vi\n            ),\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'span',\n              { className: 'error' },\n              this.state.valid.mean_vi\n            )\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'li',\n            { 'class': 'm-b-20' },\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'textarea',\n              { className: 'input', placeholder: 'Ngh\\u0129a ti\\u1EBFng anh', name: 'mean_en', type: 'text', onChange: this.handleChange, rows: '5' },\n              this.state.word.mean_en\n            )\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'li',\n            { 'class': 'm-b-20' },\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { className: 'input', placeholder: 'T\\u1EEB \\u0111\\u1ED3ng ngh\\u0129a', name: 'synonym', type: 'text', value: this.state.word.synonym, onChange: this.handleChange })\n          ),\n          Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n            'li',\n            { className: 'm-b-20' },\n            Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n              'button',\n              { className: 'btn btn-save', onClick: this.handleClick },\n              _ref2\n            )\n          )\n        )\n      )\n    );\n  };\n\n  return Home;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"])) || _class);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 1.chunk.e7f3c.js","import { h, Component } from 'preact';\nimport { route } from 'preact-router';\nimport styles from '../../../styles/sass/main.scss';\n\nimport { connect } from 'preact-redux';\nimport { mapDispatchToProps } from '../../store/word';\n\nconst mapStoreToProps = (state) => ({\n  words: state.word.words,\n  wordsDate: state.word.wordsDate,\n  isAdmin: state.user.isAdmin,\n})\n\n@connect(mapStoreToProps, mapDispatchToProps)\nexport default class Home extends Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      word: {\n        word: '',\n        mean_vi: '',\n        mean_en: '',\n        synonym: '',\n        created_at: Math.round((new Date()).getTime() / 1000),\n        updated_at: Math.round((new Date()).getTime() / 1000),\n      },\n      valid: {\n        word:'',\n        mean_vi: '',\n      }\n    }\n  }\n\n  handleChange = (event) => {\n    this.setState(function(prevState) {\n      return {\n        word: {...prevState.word, [event.target.name]: event.target.value }\n      }\n    })\n  }\n\n  handleClick = (event) => {\n    if(this.checkValid()) return;\n\n    this.regFirestore();\n  }\n\n  regFirestore(){\n    let wordData = {...this.state.word}\n    wordData.created_at = dateNow()\n    wordData.updated_at = dateNow()\n\n    db.collection(\"words\").add(wordData).then((doc) => {\n        //TODO\n        route('/', true)\n    })\n    .catch(function(error) {\n        console.error(\"Error writing document: \", error);\n    });\n  }\n\n  regRealtimeDb(){\n    const newWordKey = db.ref('words').child('all').push().key;\n    let wordData = {...this.state}\n    word.created_at = Math.round((new Date()).getTime() / 1000)\n    let updates = {};\n    if(newWordKey){\n      const date = dateNow() || new Date();\n\n      updates['all/' + newWordKey] = wordData;\n      updates['date/' + date + '/' + newWordKey] = wordData;\n\n      db.ref('words').update(updates).then(() => {\n        this.props.addWord({\n          [newWordKey]: wordData\n        })\n      });\n    }\n  }\n\n  checkValid(){\n    let check = ''\n\n    this.setState({ valid: {} })\n\n    if(!this.state.word.word){\n      this.setState({ valid: { ...this.state.valid, word: 'Từ vựng không được để trống'} });\n      check = 'error'\n    }\n\n    if(!this.state.word.mean_vi){\n      this.setState({ valid: { ...this.state.valid, mean_vi: 'Nghĩa tiếng việt không được để trống'} });\n      check = 'error'\n    }\n\n    return check;\n  }\n\n  render(props) {\n    return (\n      <div>\n        <div className=\"word-wrap\">\n          <p className=\"date\">&nbsp;</p>\n\n          <ul className=\"word-list\" style=\"margin-top:10px\">\n            <li class=\"m-b-20\">\n              <input className=\"input\" placeholder=\"Từ vựng\" name=\"word\" type=\"text\" value={this.state.word.word} onChange={this.handleChange} />\n              <span className=\"error\">{this.state.valid.word}</span>\n            </li>\n            <li class=\"m-b-20\">\n              <textarea className=\"input\" placeholder=\"Nghĩa tiếng việt\" name=\"mean_vi\" type=\"text\" onChange={this.handleChange} rows=\"5\">{this.state.word.mean_vi}</textarea>\n              <span className=\"error\">{this.state.valid.mean_vi}</span>\n            </li>\n            <li class=\"m-b-20\">\n              <textarea className=\"input\" placeholder=\"Nghĩa tiếng anh\" name=\"mean_en\" type=\"text\" onChange={this.handleChange} rows=\"5\">{this.state.word.mean_en}</textarea>\n            </li>\n            <li class=\"m-b-20\">\n              <input className=\"input\" placeholder=\"Từ đồng nghĩa\" name=\"synonym\" type=\"text\" value={this.state.word.synonym} onChange={this.handleChange} />\n            </li>\n\n            <li className=\"m-b-20\">\n              <button className=\"btn btn-save\" onClick={this.handleClick} >\n                <span> Lưu </span>\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./web/components/home/create.js"],"sourceRoot":""}