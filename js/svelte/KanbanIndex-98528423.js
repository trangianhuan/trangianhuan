import{S as e,i as t,s as a,e as n,t as l,b as s,c as r,d as o,v as i,f as c,a as d,B as u,l as v,x as g,y as p,u as m,C as f,n as h,g as b,z as D,D as k,E as T}from"./index-4579a463.js";import{c as x,f as E,a as K,h as w,j as y,k as C}from"./index-e66b9151.js";const{Object:M}=T;function L(e,t,a){const n=M.create(e);return n.item=t[a],n.each_value_1=t,n.i=a,n}function H(e,t,a){const n=M.create(e);return n.group=t[a],n.each_value=t,n.g=a,n}function O(e,t,a){const n=M.create(e);return n.kanban=t[a],n}function j(e){var t,a,d,u=e.kanban.date+"";return{c(){t=n("option"),a=l(u),t.__value=d=e.kanban.date,t.value=t.__value,s(t,"class","svelte-121lmv1")},m(e,n){r(e,t,n),o(t,a)},p(e,n){e.selDateKanban&&u!==(u=n.kanban.date+"")&&i(a,u),e.selDateKanban&&d!==(d=n.kanban.date)&&(t.__value=d),t.value=t.__value},d(e){e&&c(t)}}}function N(e){var t,a,p,m,f,h,b,_=e.item+"";function D(){e.div0_input_handler.call(a,e)}function k(){return e.dragstart_handler(e)}function T(){return e.click_handler_1(e)}return{c(){t=n("li"),a=n("div"),p=l(_),m=d(),(f=n("div")).textContent="x",h=d(),void 0===e.item&&u(D),s(a,"class","kb-board_item svelte-121lmv1"),s(a,"contenteditable",""),s(a,"draggable","true"),s(f,"class","kb-board_btn svelte-121lmv1"),s(t,"class","position-re svelte-121lmv1"),b=[v(a,"input",D),v(a,"dragstart",k),v(f,"click",T)]},m(n,l){r(n,t,l),o(t,a),o(a,p),void 0!==e.item&&(a.innerHTML=e.item),o(t,m),o(t,f),o(t,h)},p(t,n){e=n,t.groups&&_!==(_=e.item+"")&&i(p,_),t.groups&&e.item!==a.innerHTML&&(a.innerHTML=e.item)},d(e){e&&c(t),g(b)}}}function S(e){var t,a,m,f,h,b,_,D,k,T,x,E=e.group.name+"";function K(){return e.click_handler(e)}function w(){e.li_input_handler.call(b,e)}let y=e.group.items,C=[];for(let t=0;t<y.length;t+=1)C[t]=N(L(e,y,t));function M(){return e.drop_handler(e)}return{c(){t=n("div"),a=n("div"),m=n("img"),f=d(),h=n("ul"),b=n("li"),_=l(E),D=d();for(let e=0;e<C.length;e+=1)C[e].c();k=d(),s(m,"class","add-todo_img svelte-121lmv1"),s(m,"src",baseUrl+"/icon/awesome-icons/svg/plus-sign-in-a-black-circle.svg"),s(a,"class","add-todo svelte-121lmv1"),void 0===e.group.name&&u(w),s(b,"class","kb-board_title bg-"+(e.g+1)+" svelte-121lmv1"),s(b,"contenteditable",""),s(h,"class","kb-board svelte-121lmv1"),s(t,"class",T="position-re pd-15 col-has-"+e.groups.data.length+" svelte-121lmv1"),x=[v(m,"click",K),v(b,"input",w),v(h,"drop",M),v(h,"dragover",e.dragover_handler)]},m(n,l){r(n,t,l),o(t,a),o(a,m),o(t,f),o(t,h),o(h,b),o(b,_),void 0!==e.group.name&&(b.innerHTML=e.group.name),o(h,D);for(let e=0;e<C.length;e+=1)C[e].m(h,null);o(t,k)},p(a,n){if(e=n,a.groups&&E!==(E=e.group.name+"")&&i(_,E),a.groups&&e.group.name!==b.innerHTML&&(b.innerHTML=e.group.name),a.groups){let t;for(y=e.group.items,t=0;t<y.length;t+=1){const n=L(e,y,t);C[t]?C[t].p(a,n):(C[t]=N(n),C[t].c(),C[t].m(h,null))}for(;t<C.length;t+=1)C[t].d(1);C.length=y.length}a.groups&&T!==(T="position-re pd-15 col-has-"+e.groups.data.length+" svelte-121lmv1")&&s(t,"class",T)},d(e){e&&c(t),p(C,e),g(x)}}}function I(e){var t,a,b,_,D,k,T,x,E,K,w,y,C,M,L,N,I,A,R,Y,U,G,z,B,F,P,Q,W,$,q,J=e.selected?"Kanban of date: "+e.selected:"";let V=e.selDateKanban,X=[];for(let t=0;t<V.length;t+=1)X[t]=j(O(e,V,t));let Z=e.groups.data,ee=[];for(let t=0;t<Z.length;t+=1)ee[t]=S(H(e,Z,t));return{c(){t=d(),a=n("div"),b=n("div"),_=n("div"),(D=n("label")).textContent="SELECT DATE:",k=d(),T=n("select"),(x=n("option")).textContent="Please select date";for(let e=0;e<X.length;e+=1)X[e].c();E=d(),K=n("div"),(w=n("div")).textContent="NOW",y=d(),(C=n("div")).innerHTML='<input type="text" class="datepicker height-32 svelte-121lmv1" name="daterange" value="01/01/2018 - 01/15/2018">',M=d(),L=n("div"),(N=n("div")).textContent="CREATE FOR RANGE",I=d(),A=n("div"),(R=n("div")).textContent="RESET",Y=d(),U=n("div"),G=l(e.messError),z=d(),B=n("div"),F=n("div"),P=l(J),Q=d(),W=n("div"),$=n("div");for(let e=0;e<ee.length;e+=1)ee[e].c();document.title="Kanban",s(D,"class","color-or svelte-121lmv1"),x.__value="",x.value=x.__value,s(x,"class","svelte-121lmv1"),void 0===e.selected&&u(()=>e.select_change_handler.call(T)),s(T,"id","select-date"),s(T,"class","height-32 bg-fff svelte-121lmv1"),s(_,"class","pin svelte-121lmv1"),s(w,"class","btn btn--now svelte-121lmv1"),s(K,"class","pin svelte-121lmv1"),s(K,"id","icon-folder"),s(C,"class","pin svelte-121lmv1"),s(N,"class","btn btn--now svelte-121lmv1"),s(L,"class","pin svelte-121lmv1"),s(R,"class","btn btn--reset svelte-121lmv1"),s(A,"class","pin svelte-121lmv1"),s(U,"class","error svelte-121lmv1"),s(b,"class","feed-control svelte-121lmv1"),m(b,"display","flex"),m(b,"border-bottom","1px solid #ddd"),m(b,"margin-bottom","30px"),m(b,"position","relative"),s(F,"class","kb-title svelte-121lmv1"),s($,"class","row svelte-121lmv1"),s(W,"class","container svelte-121lmv1"),s(B,"class"," svelte-121lmv1"),s(a,"class","content icon svelte-121lmv1"),q=[v(T,"change",e.select_change_handler),v(T,"change",e.onChangeSelect),v(w,"click",e.selectNow),v(N,"click",e.addKanban),v(R,"click",e.resetKanban)]},m(n,l){r(n,t,l),r(n,a,l),o(a,b),o(b,_),o(_,D),o(_,k),o(_,T),o(T,x);for(let e=0;e<X.length;e+=1)X[e].m(T,null);f(T,e.selected),o(b,E),o(b,K),o(K,w),o(b,y),o(b,C),o(b,M),o(b,L),o(L,N),o(b,I),o(b,A),o(A,R),o(b,Y),o(b,U),o(U,G),o(a,z),o(a,B),o(B,F),o(F,P),o(B,Q),o(B,W),o(W,$);for(let e=0;e<ee.length;e+=1)ee[e].m($,null)},p(e,t){if(e.selDateKanban){let a;for(V=t.selDateKanban,a=0;a<V.length;a+=1){const n=O(t,V,a);X[a]?X[a].p(e,n):(X[a]=j(n),X[a].c(),X[a].m(T,null))}for(;a<X.length;a+=1)X[a].d(1);X.length=V.length}if(e.selected&&f(T,t.selected),e.messError&&i(G,t.messError),e.selected&&J!==(J=t.selected?"Kanban of date: "+t.selected:"")&&i(P,J),e.groups||e.baseUrl){let a;for(Z=t.groups.data,a=0;a<Z.length;a+=1){const n=H(t,Z,a);ee[a]?ee[a].p(e,n):(ee[a]=S(n),ee[a].c(),ee[a].m($,null))}for(;a<ee.length;a+=1)ee[a].d(1);ee.length=Z.length}},i:h,o:h,d(e){e&&(c(t),c(a)),p(X,e),p(ee,e),g(q)}}}function A(e,t,a){let n;b(e,E,e=>{a("$arrKanban",n=e)});let l,s=[],r="";x(),E.subscribe(e=>{a("selDateKanban",s=e)}),K.subscribe(e=>{0!==Object.keys(e).length&&w()}),D(async()=>{window.kanbanInput=jQuery('input[name="daterange"]').daterangepicker({opens:"left",startDate:moment(),endDate:moment(),locale:{format:"DD/MM/YYYY"}},function(e,t,a){})});let o={date:"",data:[{name:"TODO",type:"todo",items:[]},{name:"DOING",type:"doing",items:[]},{name:"DONE",type:"done",items:[]}]};function i(e,t){if(e){e.preventDefault();var n=e.dataTransfer.getData("item"),l=e.dataTransfer.getData("group");const s=o.data[l].items.splice(n,1)[0];o.data[t].items.push(s),a("groups",o)}}function c(e){o.data[e].items.push("Untitled"),a("groups",o)}function d(e,t){o.data[e].items.splice(t,1),a("groups",o)}function u(){let e=n.find(e=>e.date==l);e&&a("groups",o=_.cloneDeep(e))}Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};let v=_.debounce(()=>{a("messError",r="")},7e3);function g(){let e=function(e,t){e=new Date(e),t=new Date(t);for(var a=new Array,n=e;n<=t;)a.push(y(n,!0)),n=n.addDays(1);return a}(kanbanInput.data("daterangepicker").startDate._d,kanbanInput.data("daterangepicker").endDate._d),t=[],n=[];for(var l=0;l<e.length;l++){if(s.findIndex(t=>t.date===e[l])>=0)t.push(e[l]);else{let t=_.cloneDeep(o);t.date=e[l],n.push(t)}}return t.length&&(a("messError",r="Some kanban date duplicate: "+t.join(", ")),v()),n}return{selDateKanban:s,messError:r,selected:l,groups:o,drop:i,addTodo:c,removeTodo:d,selectNow:function(){let e=y(new Date,!0);a("selected",l=e),u()},onChangeSelect:u,addKanban:function(){let e=g();0!=e.length&&C(e)},resetKanban:function(){a("groups",o.data[0].items=[],o),a("groups",o.data[1].items=[],o),a("groups",o.data[2].items=[],o),a("groups",o.date="",o),a("selected",l=""),a("groups",o)},select_change_handler:function(){l=k(this),a("selected",l),a("selDateKanban",s)},click_handler:({g:e})=>c(e),li_input_handler:function({group:e,each_value:t,g:n}){t[n].name=this.innerHTML,a("groups",o)},div0_input_handler:function({item:e,each_value_1:t,i:n}){t[n]=this.innerHTML,a("groups",o)},dragstart_handler:({g:e,i:t})=>(function(e,t,a){e&&(e.dataTransfer.setData("group",t),e.dataTransfer.setData("item",a))})(event,e,t),click_handler_1:({g:e,i:t})=>d(e,t),drop_handler:({g:e})=>i(event,e),dragover_handler:()=>(function(e){e&&(e.preventDefault(),e.dataTransfer.dropEffect="move")})(event)}}export default class extends e{constructor(e){super(),t(this,e,A,I,a,[])}}
