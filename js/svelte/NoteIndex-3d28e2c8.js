import{S as e,i as t,s as n,e as o,t as i,a as s,b as l,l as a,c as r,d as c,v as d,f as u,w as h,n as p,y as g,x as f,g as m,F as v,A as b,G as k,u as w,m as $,k as x,h as N,o as S,z as y,E as j}from"./index-4579a463.js";import{v as H,w as I,x as A,y as C,z as P,A as O,B as R,c as B,a as L,C as T,D as U,E as M,F as Q,G as z,H as E,I as D}from"./index-62a34a18.js";import{a as J,t as F}from"./common-a441c096.js";function G(e,t,n){const o=Object.create(e);return o.key=t[n][0],o.value=t[n][1],o}function K(e,t,n){const o=Object.create(e);return o.note=t[n],o}function V(e){var t,n,h,p,g,f,m=e.note.title+"";function v(){return e.click_handler(e)}return{c(){t=o("li"),n=o("img"),h=i(m),p=s(),l(n,"alt",""),l(n,"class","pd-r-5"),l(n,"width","16px"),l(n,"height","16px"),l(n,"src",baseUrl+"/images/book.svg"),l(t,"data-id",g=e.note.id),l(t,"class","note-pin-item"),f=a(t,"click",v)},m(e,o){r(e,t,o),c(t,n),c(t,h),c(t,p)},p(n,o){e=o,n.$arrNotePin&&m!==(m=e.note.title+"")&&d(h,m),n.$arrNotePin&&g!==(g=e.note.id)&&l(t,"data-id",g)},d(e){e&&u(t),f()}}}function q(e){var t;return{c(){t=o("img"),l(t,"alt",""),l(t,"class","load-note"),l(t,"src","/images/load.gif")},m(e,n){r(e,t,n)},d(e){e&&u(t)}}}function W(e){var t,n,h,p,g,f=e.key+"";function m(){return e.click_handler_1(e)}return{c(){t=o("li"),n=o("img"),h=i(f),p=s(),l(n,"alt",""),l(n,"class","pd-r-5"),l(n,"width","16px"),l(n,"height","16px"),l(n,"src",baseUrl+"/images/book.svg"),l(t,"class","notebook-item"),g=a(t,"click",m)},m(e,o){r(e,t,o),c(t,n),c(t,h),c(t,p)},p(t,n){e=n,t.$arrNoteBooks&&f!==(f=e.key+"")&&d(h,f)},d(e){e&&u(t),g()}}}function X(e){var t,n,d,m,v,b,k,w,$,x,N,_,S,y,j,H,I,A,C,P,O,R,B,L;let T=e.$arrNotePin,U=[];for(let t=0;t<T.length;t+=1)U[t]=V(K(e,T,t));var M=0==e.$arrSearch.length&&q();let Q=Object.entries(e.$arrNoteBooks),z=[];for(let t=0;t<Q.length;t+=1)z[t]=W(G(e,Q,t));return{c(){t=o("div"),n=o("div"),d=o("div"),m=o("input"),v=s(),(b=o("button")).innerHTML='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 446.25 446.25" style="enable-background:new 0 0 446.25 446.25;" xml:space="preserve"><g><g id="search"><path d="M318.75,280.5h-20.4l-7.649-7.65c25.5-28.05,40.8-66.3,40.8-107.1C331.5,73.95,257.55,0,165.75,0S0,73.95,0,165.75\n\t\t\t                            S73.95,331.5,165.75,331.5c40.8,0,79.05-15.3,107.1-40.8l7.65,7.649v20.4L408,446.25L446.25,408L318.75,280.5z M165.75,280.5\n\t\t\t                            C102,280.5,51,229.5,51,165.75S102,51,165.75,51S280.5,102,280.5,165.75S229.5,280.5,165.75,280.5z" fill="#fff"></path></g></g></svg>',k=s(),w=o("div"),$=o("img"),x=i(" PIN"),N=s(),_=o("ul");for(let e=0;e<U.length;e+=1)U[e].c();S=s(),y=o("div"),j=o("img"),H=i(" ALL NOTE"),I=s(),A=o("div"),C=o("img"),P=i(" NOTEBOOK"),O=s(),R=o("ul"),M&&M.c(),B=s();for(let e=0;e<z.length;e+=1)z[e].c();l(m,"type","text"),l(m,"class","searchTerm"),l(m,"placeholder","Input search"),l(m,"id","search-input"),l(b,"type","submit"),l(b,"class","searchButton"),l(d,"class","search"),l(n,"class","wrap"),l($,"alt",""),l($,"class","pd-r-5"),l($,"width","16px"),l($,"height","16px"),l($,"src",baseUrl+"/images/bookmark.svg"),l(w,"class","note-wrap"),l(_,"id","notePin-content"),l(j,"alt",""),l(j,"width","18px"),l(j,"height","18px"),l(j,"src",baseUrl+"/images/note.svg"),l(y,"class","note-wrap all"),l(C,"alt",""),l(C,"class","pd-r-5"),l(C,"width","18px"),l(C,"height","18px"),l(C,"src",baseUrl+"/images/notebooks.svg"),l(A,"class","note-wrap"),l(R,"id","notebook-content"),l(t,"class","sidebar"),L=[a(m,"input",e.input_input_handler),a(m,"keyup",e.fnSearchNote),a(y,"click",e.showAllNote)]},m(o,i){r(o,t,i),c(t,n),c(n,d),c(d,m),h(m,e.searchInput),c(d,v),c(d,b),c(t,k),c(t,w),c(w,$),c(w,x),c(t,N),c(t,_);for(let e=0;e<U.length;e+=1)U[e].m(_,null);c(t,S),c(t,y),c(y,j),c(y,H),c(t,I),c(t,A),c(A,C),c(A,P),c(t,O),c(t,R),M&&M.m(R,null),c(R,B);for(let e=0;e<z.length;e+=1)z[e].m(R,null)},p(e,t){if(e.searchInput&&m.value!==t.searchInput&&h(m,t.searchInput),e.$arrNotePin||e.baseUrl){let n;for(T=t.$arrNotePin,n=0;n<T.length;n+=1){const o=K(t,T,n);U[n]?U[n].p(e,o):(U[n]=V(o),U[n].c(),U[n].m(_,null))}for(;n<U.length;n+=1)U[n].d(1);U.length=T.length}if(0==t.$arrSearch.length?M||((M=q()).c(),M.m(R,B)):M&&(M.d(1),M=null),e.$arrNoteBooks||e.baseUrl){let n;for(Q=Object.entries(t.$arrNoteBooks),n=0;n<Q.length;n+=1){const o=G(t,Q,n);z[n]?z[n].p(e,o):(z[n]=W(o),z[n].c(),z[n].m(R,null))}for(;n<z.length;n+=1)z[n].d(1);z.length=Q.length}},i:p,o:p,d(e){e&&u(t),g(U,e),M&&M.d(),g(z,e),f(L)}}}function Y(e,t,n){let o,i,s;m(e,H,e=>{n("$arrSearch",o=e)}),m(e,I,e=>{n("$arrNotePin",i=e)}),m(e,A,e=>{n("$arrNoteBooks",s=e)});const l=v();let a,r=new Fuse(o,J);function c(e){l("selectnotepin",{text:e})}function d(e){P.set(e),l("shownotebook",{text:"shownotebook"})}let u=_.debounce(function(e){!function(e){let t=r.search(e);C.set(!0),O.set(t),R.set(!0)}(e)},420);return{searchInput:a,selectNote:c,showAllNote:function(){C.set(!0),l("showAllNote",{text:"showAllNote"})},showNotebook:d,fnSearchNote:function(){u(a)},$arrSearch:o,$arrNotePin:i,$arrNoteBooks:s,input_input_handler:function(){a=this.value,n("searchInput",a)},click_handler:({note:e})=>c(e.id),click_handler_1:({key:e})=>d(e)}}class Z extends e{constructor(e){super(),t(this,e,Y,X,n,[])}}function ee(e,t,n){const o=Object.create(e);return o.note=t[n],o}function te(e){var t,n,i,a=e.$arrRenderTitle&&ne(e);let d=e.$arrRender,h=[];for(let t=0;t<d.length;t+=1)h[t]=oe(ee(e,d,t));return{c(){t=o("div"),n=o("ul"),a&&a.c(),i=s();for(let e=0;e<h.length;e+=1)h[e].c();l(n,"id","ul-note"),l(t,"class","list-note")},m(e,o){r(e,t,o),c(t,n),a&&a.m(n,null),c(n,i);for(let e=0;e<h.length;e+=1)h[e].m(n,null)},p(e,t){if(t.$arrRenderTitle?a?a.p(e,t):((a=ne(t)).c(),a.m(n,i)):a&&(a.d(1),a=null),e.$arrRender){let o;for(d=t.$arrRender,o=0;o<d.length;o+=1){const i=ee(t,d,o);h[o]?h[o].p(e,i):(h[o]=oe(i),h[o].c(),h[o].m(n,null))}for(;o<h.length;o+=1)h[o].d(1);h.length=d.length}},d(e){e&&u(t),a&&a.d(),g(h,e)}}}function ne(e){var t,n,s,l=e.$arrRender.length+"";return{c(){t=o("li"),n=i(l),s=i(" notes found")},m(e,o){r(e,t,o),c(t,n),c(t,s)},p(e,t){e.$arrRender&&l!==(l=t.$arrRender.length+"")&&d(n,l)},d(e){e&&u(t)}}}function oe(e){var t,n,h,p,g,f,m,v,b,k,w,$=e.note.title+"",x=JSON.parse(e.note.content).ops[0].insert+"";function N(){return e.click_handler(e)}return{c(){t=o("li"),n=o("div"),h=i($),p=s(),g=o("div"),f=i(x),m=s(),v=o("div"),b=s(),l(n,"class","ul-title"),l(g,"class","ul-content"),l(v,"class","ul-time"),l(t,"class","ul-note_item"),l(t,"data-id",k=e.note.id),w=a(t,"click",N)},m(e,o){r(e,t,o),c(t,n),c(n,h),c(t,p),c(t,g),c(g,f),c(t,m),c(t,v),c(t,b)},p(n,o){e=o,n.$arrRender&&$!==($=e.note.title+"")&&d(h,$),n.$arrRender&&x!==(x=JSON.parse(e.note.content).ops[0].insert+"")&&d(f,x),n.$arrRender&&k!==(k=e.note.id)&&l(t,"data-id",k)},d(e){e&&u(t),w()}}}function ie(e){var t,n=e.$isShowAllNote&&te(e);return{c(){n&&n.c(),t=b()},m(e,o){n&&n.m(e,o),r(e,t,o)},p(e,o){o.$isShowAllNote?n?n.p(e,o):((n=te(o)).c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:p,o:p,d(e){n&&n.d(e),e&&u(t)}}}function se(e,t,n){let o,i,s;m(e,C,e=>{n("$isShowAllNote",o=e)}),m(e,R,e=>{n("$arrRenderTitle",i=e)}),m(e,O,e=>{n("$arrRender",s=e)});const l=v();function a(e){l("selectnote",{text:e})}return{selectNote:a,$isShowAllNote:o,$arrRenderTitle:i,$arrRender:s,click_handler:({note:e})=>a(e.id)}}class le extends e{constructor(e){super(),t(this,e,se,ie,n,[])}}const{document:ae}=j;function re(e){var t;return{c(){(t=o("div")).innerHTML=`<img alt="" class="" src="${window.baseUrl+"/images/load.gif"}">`,l(t,"class","init-base-gif")},m(e,n){r(e,t,n)},d(e){e&&u(t)}}}function ce(e){var t,n;return{c(){(t=o("div")).textContent="SAVE",l(t,"class","btn btn-save"),l(t,"id","saveButton"),n=a(t,"click",e.fnCreateNote)},m(e,n){r(e,t,n)},d(e){e&&u(t),n()}}}function de(e){var t,n;return{c(){(t=o("li")).textContent="Delete note",l(t,"class","dropdown-item del"),n=a(t,"click",e.delNote)},m(e,n){r(e,t,n)},d(e){e&&u(t),n()}}}function ue(e){var t,n,i,d,p,g,m,v,b,_,y,j,H,I,A,C,P,O,R,B,L,T,U,M,Q,z,E,D,J,F,G,K,V,q,W,X,Y,ee,te,ne=e.$isLoading&&re(),oe=new Z({});oe.$on("selectnotepin",e.handleSelectnotepin),oe.$on("showAllNote",e.handleShowAllNote),oe.$on("shownotebook",e.handleShowtnotebook);var ie=new le({});ie.$on("selectnote",e.handleSelectnote);var se=!e.idHidden&&ce(e),ue=e.idHidden&&de(e);return{c(){t=s(),ne&&ne.c(),n=s(),oe.$$.fragment.c(),i=s(),ie.$$.fragment.c(),d=s(),p=o("div"),g=o("div"),m=o("div"),v=o("div"),(b=o("span")).textContent="Dữ liệu lần đầu cần được save",_=s(),y=o("img"),j=s(),H=o("div"),se&&se.c(),I=s(),A=o("div"),C=k("svg"),P=k("g"),O=k("path"),R=k("path"),B=k("path"),L=s(),T=o("ul"),(U=o("li")).textContent="Create note",M=s(),ue&&ue.c(),Q=s(),z=o("div"),E=o("div"),D=o("input"),J=s(),F=o("input"),G=s(),K=o("div"),V=o("input"),q=s(),(W=o("label")).textContent="PIN",X=s(),(Y=o("div")).innerHTML='<div id="editorjs"><div><input type="text" name="title" id="note_title" placeholder="Title"></div></div>',ae.title="Note",l(b,"id","mess-note"),l(y,"alt",""),l(y,"id","image-mess-note"),l(y,"src",e.baseUrl+"/images/info.svg"),l(v,"class","saved"),l(O,"d","M30,16c4.411,0,8-3.589,8-8s-3.589-8-8-8s-8,3.589-8,8S25.589,16,30,16z"),l(R,"d","M30,44c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S34.411,44,30,44z"),l(B,"d","M30,22c-4.411,0-8,3.589-8,8s3.589,8,8,8s8-3.589,8-8S34.411,22,30,22z"),l(C,"width","15"),l(C,"xmlns","http://www.w3.org/2000/svg"),l(C,"xmlns:xlink","http://www.w3.org/1999/xlink"),l(C,"version","1.1"),l(C,"id","Capa_1"),l(C,"x","0px"),l(C,"y","0px"),l(C,"viewBox","0 0 60 60"),w(C,"enable-background","new 0 0 60 60"),l(C,"xml:space","preserve"),l(U,"class","dropdown-item create"),l(T,"class","dropdown"),l(A,"class","btn-more"),l(H,"class","dis-flex-center"),l(g,"class","btn-group"),l(D,"type","hidden"),l(D,"id","idHidden"),l(F,"type","text"),l(F,"class","border_none notebooks_input"),l(F,"placeholder","Input notebooks"),F.value="",l(F,"id","notebooks_input"),l(V,"type","checkbox"),l(V,"id","note-pin"),l(V,"name","note-pin"),V.__value="true",V.value=V.__value,l(W,"for","note-pin"),l(K,"class","pin"),l(E,"class","note_input_group"),l(z,"class","note-area"),l(p,"class","content"),te=[a(U,"click",e.resetNote),a(D,"input",e.input0_input_handler),a(F,"input",e.input1_input_handler),a(V,"change",e.input2_change_handler)]},m(o,s){r(o,t,s),ne&&ne.m(o,s),r(o,n,s),$(oe,o,s),r(o,i,s),$(ie,o,s),r(o,d,s),r(o,p,s),c(p,g),c(g,m),c(m,v),c(v,b),c(v,_),c(v,y),c(g,j),c(g,H),se&&se.m(H,null),c(H,I),c(H,A),c(A,C),c(C,P),c(P,O),c(P,R),c(P,B),c(A,L),c(A,T),c(T,U),c(T,M),ue&&ue.m(T,null),c(p,Q),c(p,z),c(z,E),c(E,D),h(D,e.idHidden),c(E,J),c(E,F),h(F,e.notebooksInput),c(E,G),c(E,K),c(K,V),V.checked=e.notePin,c(K,q),c(K,W),c(z,X),c(z,Y),ee=!0},p(e,t){t.$isLoading?ne||((ne=re()).c(),ne.m(n.parentNode,n)):ne&&(ne.d(1),ne=null),t.idHidden?se&&(se.d(1),se=null):se||((se=ce(t)).c(),se.m(H,I)),t.idHidden?ue||((ue=de(t)).c(),ue.m(T,null)):ue&&(ue.d(1),ue=null),e.idHidden&&h(D,t.idHidden),e.notebooksInput&&F.value!==t.notebooksInput&&h(F,t.notebooksInput),e.notePin&&(V.checked=t.notePin)},i(e){ee||(x(oe.$$.fragment,e),x(ie.$$.fragment,e),ee=!0)},o(e){N(oe.$$.fragment,e),N(ie.$$.fragment,e),ee=!1},d(e){e&&u(t),ne&&ne.d(e),e&&u(n),S(oe,e),e&&u(i),S(ie,e),e&&(u(d),u(p)),se&&se.d(),ue&&ue.d(),f(te)}}}function he(e,t,n){let o,i,s,l,a;m(e,H,e=>{n("$arrSearch",o=e)}),m(e,E,e=>{n("$arrNote",i=e)}),m(e,A,e=>{n("$arrNoteBooks",s=e)}),m(e,P,e=>{n("$keySelectNootbook",l=e)}),m(e,D,e=>{n("$isLoading",a=e)}),B();let r,c,d,u=!1,h=[];function p(e,t){let o=e.find(e=>e.id==t);jQuery("#note_title").val(o.title),n("idHidden",r=o.id),n("notebooksInput",c=o.notebook),n("notePin",u=o.pin||!1),d.setContents(JSON.parse(o.content))}function g(){jQuery("#note_title").val(""),n("idHidden",r=""),n("notebooksInput",c=""),n("notePin",u=!1),d.setContents(""),M(baseUrl+"/images/info.svg",20,20,"Dữ liệu lần đầu cần được save"),jQuery(".saved").show()}return L.subscribe(e=>{}),A.subscribe(e=>{let t=Object.keys(e);t=t.filter(T),jQuery("#notebooks_input").autocomplete({source:t})}),y(async()=>{d=new Quill("#editorjs",{modules:{toolbar:F},placeholder:"write note here..",theme:"snow"}),jQuery("#editorjs").prepend('<div><input type="text" name="title" id="note_title" value="" placeholder="Title"></div>');var e=_.debounce(function(e,t){z(r,e,JSON.stringify(t),c,u,d.root.innerHTML)},2e3);function t(){M(baseUrl+"/images/code.gif",40,30,"Dữ liệu note đang thay đổi..."),jQuery(".saved").show(),e(document.getElementById("note_title").value||"",d.getContents())}jQuery("body").on("change, keyup","#note_title, #notebooks_input, #note-pin",function(){jQuery("#idHidden").val()&&t()}),d.on("text-change",function(e,n,o){r&&"user"==o&&t()})}),{idHidden:r,notebooksInput:c,notePin:u,fnCreateNote:async function(){let e=d.getContents(),t=U(jQuery("#note_title").val(),JSON.stringify(e),c,u,d.root.innerHTML);await t,t.then(function(e){e&&"error"!=e&&n("idHidden",r=e)})},handleSelectnotepin:function(e){p(o,e.detail.text)},handleSelectnote:function(e){p(o,e.detail.text)},handleShowAllNote:function(e){console.log("handleShowAllNote"),O.set(i),R.set(""),console.log("handleShowAllNote step1",h)},handleShowtnotebook:function(e){console.log("handleSelectnotebook",s,l),C.set(!0);let t=s[l]||[];O.set(t),R.set("")},resetNote:g,delNote:async function(){let e=Q(r);await e,e.then(function(e){"success"==e&&g()})},baseUrl:baseUrl,$isLoading:a,input0_input_handler:function(){r=this.value,n("idHidden",r)},input1_input_handler:function(){c=this.value,n("notebooksInput",c)},input2_change_handler:function(){u=this.checked,n("notePin",u)}}}export default class extends e{constructor(e){super(),t(this,e,he,ue,n,[])}}
